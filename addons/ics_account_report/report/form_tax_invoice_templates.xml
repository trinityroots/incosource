<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="form_tax_invoice">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.basic_layout">
                <t t-call="ics_account_report.tax_invoice" />
            </t>
        </t>
    </template>

    <template id="tax_invoice">
            <style>
                    .text_line_limit {
                       overflow: hidden;
                       text-overflow: ellipsis;
                       width: 600px;
                       display: -webkit-box;
                       -webkit-line-clamp: 2; /* number of lines to show */
                               line-clamp: 2;
                       -webkit-box-orient: vertical;
                    }
                    .text_address_limit {
                       overflow: hidden;
                       text-overflow: ellipsis;
                       width: 430px;
                       height: 80px;
                       display: -webkit-box;
                       -webkit-line-clamp: 1; /* number of lines to show */
                               line-clamp: 1;
                       -webkit-box-orient: vertical;
                    }
                    .font14{
                        font-family:Tahoma;
                        font-size:16px;
                    }
                    .font16{
                        font-family:Tahoma;
                        font-size:16px;
                    }
                </style>
            <t t-call="ics_account_report.tax_invoice_header" />
            <div class="page" style="font-family:Tahoma; font-weight: bold; font-size:16px;">
                <table class="font14" style="font-family:Tahoma; font-weight: bold; font-size:14px; width:86%;border-collapse:collapse;
                position: absolute; left: 75px;top: 90px;">
                    <t t-set="counter" t-value="0" />
                    <t t-foreach="o.invoice_line_ids" t-as="line">
                        <tr>
                            <t t-set="counter" t-value="counter+1" />
                            <td style="width:75px;text-align:left;padding-top:1px;">
                                <span t-field="line.product_id.default_code" />
                            </td>
                            <td style="width:325px;text-align:left;padding-top:1px;">
                                <div style="margin-left: 10px;"><span t-field="line.product_id.name" /></div>
                            </td>
                            <td style="width:90px;text-align:right;padding-top:3px;">
                                <span t-field="line.quantity" />
                            </td>
                            <td style="width:100px;text-align:right; padding-top:1px;">
                                <span t-field="line.price_unit" />
                            </td>
                            <td style="width:85px;text-align:right;padding-top:1px;">
                                <span t-field="line.discount" />
                            </td>
                            <td style="width:100px;text-align:right;padding-top:1px;">
                                <div style="margin-right: 10px;">
                                <span t-esc="line.price_unit * line.quantity" t-options='{"widget": "float", "precision": 2}'/>
                                </div>
                            </td>
                            <td style="width:100px;text-align:right;padding-top:1px;">
                                <span t-field="line.price_subtotal" style="margin-right:15px;"/>
                            </td>
                        </tr>
                    </t>
                </table>
            </div>
        <t t-call="ics_account_report.tax_invoice_footer" />
    </template>

    <template id="tax_invoice_header">
        <style>
                    .text_line_limit {
                       overflow: hidden;
                       text-overflow: ellipsis;
                       width: 600px;
                       display: -webkit-box;
                       -webkit-line-clamp: 2; /* number of lines to show */
                               line-clamp: 2;
                       -webkit-box-orient: vertical;
                    }
                    .text_address_limit {
                       overflow: hidden;
                       text-overflow: ellipsis;
                       width: 430px;
                       height: 80px;
                       display: -webkit-box;
                       -webkit-line-clamp: 1; /* number of lines to show */
                               line-clamp: 1;
                       -webkit-box-orient: vertical;
                    }
                    .font14{
                        font-family:Tahoma;
                        font-size:16px;
                    }
                    .font16{
                        font-family:Tahoma;
                        font-size:16px;
                    }
                </style>
        <div class="header" style="font-family:Tahoma; font-weight: bold;; font-size:16px;">
<!---->
            <div class="font14" style="position: absolute; left: 135px;top: 120px;text-align:left;width:400px;">
                <span t-if="o.partner_id.name" t-field="o.partner_id.name"/>
            </div>
            <div class="font14" style="position: absolute; left: 135px;top: 145px;text-align:left;width:400px;">
                <span t-if="o.partner_id.customer_reference" t-field="o.partner_id.customer_reference"/>
            </div>

            <div class="font14 text_address_limit" style="position: absolute; left: 135px;top: 170px;text-align:left;width:430px;">
                <span t-if="o.partner_id.street" t-field="o.partner_id.street"/>,<span t-if="o.partner_id.street2" t-field="o.partner_id.street2"/>
                <br/>
                <span t-if="o.partner_id.city" t-field="o.partner_id.city"/>,<span t-if="o.partner_id.zip" t-field="o.partner_id.zip"/>
                <br/>
                เลขประจำตัวผู้เสียภาษีอากร: <span t-if="o.partner_id.vat" t-field="o.partner_id.vat"/>
            </div>
<!---->
            <div class="font14" style="position: absolute; left: 680px;top: 120px;text-align:left;width:140px;">
                <t t-if="o.pos_order_ids">
                    <span>00001</span>
                </t>
                <t t-else="">
                    <span>HEAD OFFICE</span>
                </t>
            </div>
            <div class="font14" style="position: absolute; left: 860px;top: 100px;text-align:left;width:150px;">
                <span t-if="o.name" t-field="o.name"/>
            </div>
            <div class="font14" style="position: absolute; left: 860px;top: 120px;text-align:left;width:100px;">
                <span t-if="o.invoice_date" t-field="o.invoice_date" t-options="{'format': 'dd.MM.YYYY'}"/>
            </div>

            <div class="font14" style="position: absolute; left: 860px;top: 240px;text-align:right;width:85px;">
                <span class="page"/>
                /
                <span class="topage"/>
            </div>
<!---->
            <div class="font14" style="position: absolute; left: 75px;top: 310px;text-align:center;width:130px;">
                <span t-if="o.invoice_line_ids" t-field="o.invoice_line_ids[0].sale_line_ids.order_id.client_order_ref"/>
            </div>
            <div class="font14" style="position: absolute; left: 200px;top: 310px;text-align:center;width:140px;">
                <span t-if="o.invoice_line_ids"
                      t-field="o.invoice_line_ids[0].sale_line_ids.order_id.date_order"
                      t-options="{'format': 'dd.MM.YYYY'}"/>
            </div>
            <div class="font14" style="position: absolute; left: 300px;top: 310px;text-align:center;width:190px;">
                <span t-if="o.invoice_line_ids" t-field="o.invoice_line_ids[0].sale_line_ids.order_id.name" />
            </div>
            <div class="font14" style="position: absolute; left: 500px;top: 310px;text-align:center;width:100px;">
                <span t-if="o.invoice_payment_term_id" t-field="o.invoice_payment_term_id.name" />
            </div>
            <div class="font14" style="position: absolute; left: 620px;top: 310px;text-align:center;width:100px;">
                <span t-if="o.invoice_date_due"
                      t-field="o.invoice_date_due"
                      t-options="{'format': 'dd.MM.YYYY'}"/>
            </div>
            <div class="font14" style="position: absolute; left: 730px;top: 310px;text-align:center;width:100px;">
<!--                - -->
            </div>
            <div class="font14" style="position: absolute; left: 840px;top: 310px;text-align:center;width:115px;">
                <t t-if="o.invoice_line_ids">
                    <t t-if="o.invoice_line_ids[0].sale_line_ids.order_id.tag_ids">
                        <t t-esc="o.invoice_line_ids[0].sale_line_ids.order_id.tag_ids[0].name"/>
                    </t>
                </t>
            </div>
<!--            -->
        </div>
    </template>

    <template id="tax_invoice_footer">
            <div style="font-family:Tahoma; font-weight: bold;; font-size:14px;"
                 class="footer">
                <div class="font14" style="position: absolute; left: 820px;top: 15px;text-align:right;width:140px;">
                    <span t-field="o.amount_untaxed" />
                </div>
                <div class="font14" style="position: absolute; left: 790px;top: 45px;text-align:right;width:60px;">
                    <span>7.00%</span>
                </div>
                <div class="font14" style="position: absolute; left: 820px;top: 45px;text-align:right;width:140px;">
                    <span t-field="o.amount_tax" />
                </div>
                <div class="font14" style="position: absolute; left: 820px;top: 75px;text-align:right;width:140px;">
                    <span t-field="o.amount_total" />
                </div>
                <div style="position: absolute; left: 90px;top: 15px;text-align:left;height: 60px;width:580px;" class="text_line_limit font14">
                    <span t-field="o.narration"/>
                </div>
                <div class="font14" style="position: absolute; left: 10px;top: 90px;text-align:center;width:600px;border: 0px solid;">
                    <span t-esc="o.currency_id.with_context(lang='en_US').amount_to_text(o.amount_total)"/>
                </div>
                <div class="font14" style="position: absolute; left: 640px;top: 170px;text-align:center;width:350px;">
                    <img t-if="o.company_id.authorized_signature" t-att-src="image_data_uri(o.company_id.authorized_signature)"
                         style="max-height: 90px;width: 250px; margin-top: 15px" alt="Signature"/>
                </div>
            </div>
    </template>
</odoo>
